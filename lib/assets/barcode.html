<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
    </style>
    <script src="quagga.min.js"></script>
</head>
<body>
<!-- Div to show the scanner -->
<div id="liveStream" ></div>
<script>
    Quagga.init({
        inputStream: {
            name: "Live",
            type: 'LiveStream',
            target: document.getElementById('liveStream')
        },
        decoder: {
            readers: ["code_39_reader"],
        }
    }, function(err) {
        if (err) {
            console.log(err)
            return
        }
        console.log('Initalization finished. Ready to start')
        Quagga.start()
    })

Quagga.onDetected(data => {
            if (data) {
                if (data.codeResult) {
                    Quagga.stop()
                    /* handle success for web */
                    window.parent.postMessage(data.codeResult, "*");

                    /* handle success for window */
                    if (window.chrome.webview != "undefined") {
                        var param = {
                            "methodName": "successCallback",
                            "data": data.codeResult
                        }
                        window.chrome.webview.postMessage(param);
                    }
                }
            }
        })
      </script>
</body>
</html>
